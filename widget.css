/* widget.css
   Replacement UI - tidy.ai-inspired styles
   Keep filenames intact: default-mascot.png remains the placeholder */
:root{
  --primary: #2563EB;
  --bg: #ffffff;
  --muted: #6b7280;
  --panel-radius: 14px;
  --shadow: 0 10px 30px rgba(15,23,42,0.12);
  --glass: rgba(255,255,255,0.85);
}

/* layout */
.mascot-panel {
  position: fixed;
  right: 20px;
  bottom: 20px;
  width: 840px;
  max-width: calc(100vw - 40px);
  background: var(--bg);
  border-radius: var(--panel-radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transform-origin: bottom right;
  transition: transform 220ms ease, opacity 220ms ease;
  z-index: 99999;
  border: 1px solid rgba(0,0,0,0.04);
}

/* closed state (minimized) */
.mascot-panel.closed {
  transform: translateY(18px) scale(0.98);
  opacity: 0;
  pointer-events: none;
  height: 0;
}

/* header */
.panel-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(0,0,0,0.04);
}
.brand { display:flex; align-items:center; gap:12px; }
.logo {
  width:42px;height:42px;border-radius:10px;background:var(--primary); color:white; font-weight:700;
  display:flex;align-items:center;justify-content:center;font-size:16px;
}
.meta .title { font-weight:700; font-size:14px; }
.meta .subtitle { font-size:12px; color:var(--muted); }

/* header controls */
.icon-btn {
  background:transparent;border:none;padding:6px;margin-left:6px;cursor:pointer;font-size:14px;color:var(--muted);
}
.icon-btn:hover { color: #111827; }

/* body layout */
.panel-body {
  display:flex;
  gap:16px;
  padding: 16px;
}
.left { width:260px; display:flex; flex-direction:column; gap:12px; align-items:center; }
.right { flex:1; display:flex; flex-direction:column; gap:12px; }

/* avatar */
.avatar-wrap { background:linear-gradient(180deg, rgba(37,99,235,0.06), rgba(6,182,212,0.03)); padding:14px; border-radius:12px; width:100%; display:flex; justify-content:center; align-items:center;}
.avatar { position:relative; width:160px; height:160px; display:flex; align-items:center; justify-content:center; }
.avatar img { width:140px; height:140px; object-fit:cover; border-radius:16px; box-shadow: 0 8px 24px rgba(2,6,23,0.08); transition: transform 300ms ease; }
.avatar-mouth { position:absolute; bottom:18px; width:36px; height:12px; left:50%; transform:translateX(-50%); border-radius:8px; background: rgba(0,0,0,0.12); opacity:0; transition:opacity 120ms ease; }

/* sparkle / accent */
.avatar-spark { position:absolute; top:8px; right:8px; width:18px; height:18px; border-radius:6px; background:var(--primary); opacity:0; transform:scale(0.6); transition:all 220ms ease; }

/* chips */
.chips { display:flex; flex-direction:column; gap:8px; width:100%; }
.chip { align-self:stretch; padding:8px 10px; text-align:left; border-radius:10px; border:1px solid rgba(15,23,42,0.04); background:white; cursor:pointer; font-size:13px; color:#111827; }
.chip:hover { box-shadow: 0 6px 18px rgba(2,6,23,0.06); transform:translateY(-2px); }

/* upload */
.upload-area { width:100%; display:flex; justify-content:center; }
.upload-label { cursor:pointer; display:inline-block; }
.upload-btn { padding:8px 14px; border-radius:10px; background:rgba(37,99,235,0.08); color:var(--primary); border:1px dashed rgba(37,99,235,0.12); font-weight:600; }

/* chat area */
.chat-body { background:#f8fafc; border-radius:10px; padding:12px; flex:1; overflow:auto; min-height:220px; max-height:420px; }
.message { display:flex; gap:10px; margin-bottom:10px; }
.msg-user { margin-left:auto; background:white; padding:10px 12px; border-radius:12px; border:1px solid rgba(0,0,0,0.04); max-width:78%; box-shadow:0 6px 20px rgba(2,6,23,0.04); }
.msg-bot { margin-right:auto; background:linear-gradient(180deg, white, #fbfdff); padding:10px 12px; border-radius:12px; border:1px solid rgba(0,0,0,0.02); max-width:78%; }

/* composer */
.composer { display:flex; gap:8px; align-items:flex-end; margin-top:6px; }
textarea#chat-input { flex:1; min-height:40px; max-height:120px; padding:10px; border-radius:10px; border:1px solid rgba(0,0,0,0.06); resize:none; font-size:14px; }
.composer-actions { display:flex; flex-direction:column; gap:8px; }
.composer-btn { padding:8px 12px; border-radius:10px; border:none; cursor:pointer; background: #f3f4f6; }
.composer-btn.primary { background: var(--primary); color:white; font-weight:700; }

.panel-footer { padding:8px 14px; border-top: 1px solid rgba(0,0,0,0.04); font-size:13px; color:var(--muted); }

/* floating toggle */
.mascot-toggle { position: fixed; right:20px; bottom:20px; z-index:999999; display:flex; gap:8px; align-items:center; padding:10px 14px; border-radius:999px; background:var(--primary); color:white; border:none; box-shadow:0 12px 40px rgba(2,6,23,0.14); cursor:pointer; }
.mascot-toggle img { width:36px; height:36px; border-radius:999px; object-fit:cover; border:2px solid rgba(255,255,255,0.14); }

/* small devices: make widget full screen-ish */
@media (max-width:900px) {
  .mascot-panel { right:12px; left:12px; bottom:12px; width:auto; max-width: calc(100vw - 24px); }
  .left { display:none; } /* compact on small screens */
}

/* ---------- Mascot animations (CSS classes will be toggled by JS) ---------- */
@keyframes dance {
  0% { transform: translateY(0) rotate(0deg) }
  25% { transform: translateY(-6px) rotate(-4deg) }
  50% { transform: translateY(0) rotate(0deg) }
  75% { transform: translateY(-6px) rotate(4deg) }
  100% { transform: translateY(0) rotate(0deg) }
}
.avatar.dance img { animation: dance 900ms ease-in-out infinite; transform-origin:center bottom; }

@keyframes sing {
  0% { transform: scaleY(1); opacity:0.85 }
  50% { transform: scaleY(1.8); opacity:1 }
  100% { transform: scaleY(1); opacity:0.85 }
}
.avatar.sing .avatar-mouth { opacity:1; animation: sing 520ms linear infinite; background: rgba(0,0,0,0.18); }

@keyframes wave {
  0% { transform: rotate(0deg) }
  20% { transform: rotate(12deg) }
  40% { transform: rotate(-12deg) }
  60% { transform: rotate(8deg) }
  80% { transform: rotate(-8deg) }
  100% { transform: rotate(0deg) }
}
.avatar.wave img { animation: wave 900ms ease-in-out 2; transform-origin:center bottom; }

/* subtle sparkle pop */
.avatar.spark { opacity:0; transform:scale(0.6); transition:all 180ms ease; }
.avatar.sing .avatar-spark,
.avatar.dance .avatar-spark,
.avatar.wave .avatar-spark { opacity:1; transform:scale(1); }

/* accessibility focus */
.mascot-toggle:focus { outline: 3px solid rgba(37,99,235,0.18); }

/* small helpers */
.hidden { display:none !important; }
